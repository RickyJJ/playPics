{
  "code": "import { Browser } from \"./Browser\";\r\nimport { Utils } from \"./Utils\";\r\nimport { ILaya } from \"../../ILaya\";\r\nvar supportWeakMap = !!WeakMap;\r\nexport class WeakObject {\r\n    constructor() {\r\n        this._obj = WeakObject.supportWeakMap ? new Browser.window.WeakMap() : {};\r\n        if (!WeakObject.supportWeakMap)\r\n            WeakObject._maps.push(this);\r\n    }\r\n    static __init__() {\r\n        WeakObject.I = new WeakObject();\r\n        if (!WeakObject.supportWeakMap)\r\n            ILaya.systemTimer.loop(WeakObject.delInterval, null, WeakObject.clearCache);\r\n    }\r\n    static clearCache() {\r\n        for (var i = 0, n = WeakObject._maps.length; i < n; i++) {\r\n            var obj = WeakObject._maps[i];\r\n            obj._obj = {};\r\n        }\r\n    }\r\n    set(key, value) {\r\n        if (key == null)\r\n            return;\r\n        if (WeakObject.supportWeakMap) {\r\n            var objKey = key;\r\n            if (typeof (key) == 'string' || typeof (key) == 'number') {\r\n                objKey = WeakObject._keys[key];\r\n                if (!objKey)\r\n                    objKey = WeakObject._keys[key] = { k: key };\r\n            }\r\n            this._obj.set(objKey, value);\r\n        }\r\n        else {\r\n            if (typeof (key) == 'string' || typeof (key) == 'number') {\r\n                this._obj[key] = value;\r\n            }\r\n            else {\r\n                key.$_GID || (key.$_GID = Utils.getGID());\r\n                this._obj[key.$_GID] = value;\r\n            }\r\n        }\r\n    }\r\n    get(key) {\r\n        if (key == null)\r\n            return null;\r\n        if (WeakObject.supportWeakMap) {\r\n            var objKey = (typeof (key) == 'string' || typeof (key) == 'number') ? WeakObject._keys[key] : key;\r\n            if (!objKey)\r\n                return null;\r\n            return this._obj.get(objKey);\r\n        }\r\n        else {\r\n            if (typeof (key) == 'string' || typeof (key) == 'number')\r\n                return this._obj[key];\r\n            return this._obj[key.$_GID];\r\n        }\r\n    }\r\n    del(key) {\r\n        if (key == null)\r\n            return;\r\n        if (WeakObject.supportWeakMap) {\r\n            var objKey = (typeof (key) == 'string' || typeof (key) == 'number') ? WeakObject._keys[key] : key;\r\n            if (!objKey)\r\n                return;\r\n            this._obj.delete(objKey);\r\n        }\r\n        else {\r\n            if (typeof (key) == 'string' || typeof (key) == 'number')\r\n                delete this._obj[key];\r\n            else\r\n                delete this._obj[this._obj.$_GID];\r\n        }\r\n    }\r\n    has(key) {\r\n        if (key == null)\r\n            return false;\r\n        if (WeakObject.supportWeakMap) {\r\n            var objKey = (typeof (key) == 'string' || typeof (key) == 'number') ? WeakObject._keys[key] : key;\r\n            return this._obj.has(objKey);\r\n        }\r\n        else {\r\n            if (typeof (key) == 'string' || typeof (key) == 'number')\r\n                return this._obj[key] != null;\r\n            return this._obj[this._obj.$_GID] != null;\r\n        }\r\n    }\r\n}\r\nWeakObject.supportWeakMap = supportWeakMap;\r\nWeakObject.delInterval = 10 * 60 * 1000;\r\nWeakObject._keys = {};\r\nWeakObject._maps = [];\r\n",
  "references": [
    "D:/MySpace/Projects/NextPresent/PresentNext/libs/laya/utils/Browser.ts",
    "D:/MySpace/Projects/NextPresent/PresentNext/libs/laya/utils/Utils.ts",
    "D:/MySpace/Projects/NextPresent/PresentNext/libs/ILaya.ts"
  ]
}
