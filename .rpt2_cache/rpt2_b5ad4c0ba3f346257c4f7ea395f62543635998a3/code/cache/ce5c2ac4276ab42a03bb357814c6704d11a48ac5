{
  "code": "import { ILaya } from \"../../ILaya\";\r\nexport class Browser {\r\n    static __init__() {\r\n        var Laya = window.Laya || ILaya.Laya;\r\n        if (Browser._window)\r\n            return Browser._window;\r\n        var win = Browser._window = window;\r\n        var doc = Browser._document = win.document;\r\n        var u = Browser.userAgent = win.navigator.userAgent;\r\n        if (u.indexOf('AlipayMiniGame') > -1 && \"my\" in Browser.window) {\r\n            window.aliPayMiniGame(Laya, Laya);\r\n            if (!Laya[\"ALIMiniAdapter\"]) {\r\n                console.error(\"请先添加阿里小游戏适配库\");\r\n            }\r\n            else {\r\n                Laya[\"ALIMiniAdapter\"].enable();\r\n            }\r\n        }\r\n        if (u.indexOf('OPPO') == -1 && u.indexOf(\"MiniGame\") > -1 && \"wx\" in Browser.window) {\r\n            if (\"qq\" in Browser.window) {\r\n                window.qqMiniGame(Laya, Laya);\r\n                if (!Laya[\"QQMiniAdapter\"]) {\r\n                    console.error(\"请引入手机QQ小游戏的适配库：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0\");\r\n                }\r\n                else {\r\n                    Laya[\"QQMiniAdapter\"].enable();\r\n                }\r\n            }\r\n            else {\r\n                window.wxMiniGame(Laya, Laya);\r\n                if (!Laya[\"MiniAdpter\"]) {\r\n                    console.error(\"请先添加小游戏适配库,详细教程：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0\");\r\n                }\r\n                else {\r\n                    Laya[\"MiniAdpter\"].enable();\r\n                }\r\n            }\r\n        }\r\n        if (u.indexOf(\"MiniGame\") > -1 && \"qq\" in Browser.window) {\r\n            window.qqMiniGame(Laya, Laya);\r\n            if (!Laya[\"QQMiniAdapter\"]) {\r\n                console.error(\"请先添加小游戏适配库,详细教程\");\r\n            }\r\n            else {\r\n                Laya[\"QQMiniAdapter\"].enable();\r\n            }\r\n        }\r\n        if (u.indexOf(\"SwanGame\") > -1) {\r\n            window.bdMiniGame(Laya, Laya);\r\n            if (!Laya[\"BMiniAdapter\"]) {\r\n                console.error(\"请先添加百度小游戏适配库,详细教程：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0\");\r\n            }\r\n            else {\r\n                Laya[\"BMiniAdapter\"].enable();\r\n            }\r\n        }\r\n        if (u.indexOf('QuickGame') > -1) {\r\n            window.miMiniGame(Laya, Laya);\r\n            if (!Laya[\"KGMiniAdapter\"]) {\r\n                console.error(\"请先添加小米小游戏适配库,详细教程：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0\");\r\n            }\r\n            else {\r\n                Laya[\"KGMiniAdapter\"].enable();\r\n            }\r\n        }\r\n        if (u.indexOf('OPPO') > -1 && u.indexOf('MiniGame') > -1) {\r\n            window.qgMiniGame(Laya, Laya);\r\n            if (!Laya[\"QGMiniAdapter\"]) {\r\n                console.error(\"请先添加OPPO小游戏适配库\");\r\n            }\r\n            else {\r\n                Laya[\"QGMiniAdapter\"].enable();\r\n            }\r\n        }\r\n        if (u.indexOf('VVGame') > -1) {\r\n            window.vvMiniGame(Laya, Laya);\r\n            if (!Laya[\"VVMiniAdapter\"]) {\r\n                console.error(\"请先添加VIVO小游戏适配库\");\r\n            }\r\n            else {\r\n                Laya[\"VVMiniAdapter\"].enable();\r\n            }\r\n        }\r\n        win.trace = console.log;\r\n        win.requestAnimationFrame = win.requestAnimationFrame || win.webkitRequestAnimationFrame || win.mozRequestAnimationFrame || win.oRequestAnimationFrame || win.msRequestAnimationFrame || function (fun) {\r\n            return win.setTimeout(fun, 1000 / 60);\r\n        };\r\n        var bodyStyle = doc.body.style;\r\n        bodyStyle.margin = 0;\r\n        bodyStyle.overflow = 'hidden';\r\n        bodyStyle['-webkit-user-select'] = 'none';\r\n        bodyStyle['-webkit-tap-highlight-color'] = 'rgba(200,200,200,0)';\r\n        var metas = doc.getElementsByTagName('meta');\r\n        var i = 0, flag = false, content = 'width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no';\r\n        while (i < metas.length) {\r\n            var meta = metas[i];\r\n            if (meta.name == 'viewport') {\r\n                meta.content = content;\r\n                flag = true;\r\n                break;\r\n            }\r\n            i++;\r\n        }\r\n        if (!flag) {\r\n            meta = doc.createElement('meta');\r\n            meta.name = 'viewport', meta.content = content;\r\n            doc.getElementsByTagName('head')[0].appendChild(meta);\r\n        }\r\n        Browser.onMobile = window.isConchApp ? true : u.indexOf(\"Mobile\") > -1;\r\n        Browser.onIOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\r\n        Browser.onIPhone = u.indexOf(\"iPhone\") > -1;\r\n        Browser.onMac = u.indexOf(\"Mac OS X\") > -1;\r\n        Browser.onIPad = u.indexOf(\"iPad\") > -1;\r\n        Browser.onAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1;\r\n        Browser.onWP = u.indexOf(\"Windows Phone\") > -1;\r\n        Browser.onQQBrowser = u.indexOf(\"QQBrowser\") > -1;\r\n        Browser.onMQQBrowser = u.indexOf(\"MQQBrowser\") > -1 || (u.indexOf(\"Mobile\") > -1 && u.indexOf(\"QQ\") > -1);\r\n        Browser.onIE = !!win.ActiveXObject || \"ActiveXObject\" in win;\r\n        Browser.onWeiXin = u.indexOf('MicroMessenger') > -1;\r\n        Browser.onSafari = u.indexOf(\"Safari\") > -1;\r\n        Browser.onPC = !Browser.onMobile;\r\n        Browser.onMiniGame = u.indexOf('MiniGame') > -1;\r\n        Browser.onBDMiniGame = u.indexOf('SwanGame') > -1;\r\n        Browser.onLayaRuntime = !!Browser.window.conch;\r\n        if (u.indexOf('OPPO') > -1 && u.indexOf('MiniGame') > -1) {\r\n            Browser.onQGMiniGame = true;\r\n            Browser.onMiniGame = false;\r\n        }\r\n        else if (\"qq\" in Browser.window && u.indexOf('MiniGame') > -1) {\r\n            Browser.onQQMiniGame = true;\r\n            Browser.onMiniGame = false;\r\n        }\r\n        Browser.onVVMiniGame = u.indexOf('VVGame') > -1;\r\n        Browser.onKGMiniGame = u.indexOf('QuickGame') > -1;\r\n        if (u.indexOf('AlipayMiniGame') > -1) {\r\n            Browser.onAlipayMiniGame = true;\r\n            Browser.onMiniGame = false;\r\n        }\r\n        return win;\r\n    }\r\n    static createElement(type) {\r\n        Browser.__init__();\r\n        return Browser._document.createElement(type);\r\n    }\r\n    static getElementById(type) {\r\n        Browser.__init__();\r\n        return Browser._document.getElementById(type);\r\n    }\r\n    static removeElement(ele) {\r\n        if (ele && ele.parentNode)\r\n            ele.parentNode.removeChild(ele);\r\n    }\r\n    static now() {\r\n        return Date.now();\r\n        ;\r\n    }\r\n    static get clientWidth() {\r\n        Browser.__init__();\r\n        return Browser._window.innerWidth || Browser._document.body.clientWidth;\r\n    }\r\n    static get clientHeight() {\r\n        Browser.__init__();\r\n        return Browser._window.innerHeight || Browser._document.body.clientHeight || Browser._document.documentElement.clientHeight;\r\n    }\r\n    static get width() {\r\n        Browser.__init__();\r\n        return ((ILaya.stage && ILaya.stage.canvasRotation) ? Browser.clientHeight : Browser.clientWidth) * Browser.pixelRatio;\r\n    }\r\n    static get height() {\r\n        Browser.__init__();\r\n        return ((ILaya.stage && ILaya.stage.canvasRotation) ? Browser.clientWidth : Browser.clientHeight) * Browser.pixelRatio;\r\n    }\r\n    static get pixelRatio() {\r\n        if (Browser._pixelRatio < 0) {\r\n            Browser.__init__();\r\n            if (Browser.userAgent.indexOf(\"Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)\") > -1)\r\n                Browser._pixelRatio = 2;\r\n            else {\r\n                Browser._pixelRatio = (Browser._window.devicePixelRatio || 1);\r\n                if (Browser._pixelRatio < 1)\r\n                    Browser._pixelRatio = 1;\r\n            }\r\n        }\r\n        return Browser._pixelRatio;\r\n    }\r\n    static get container() {\r\n        if (!Browser._container) {\r\n            Browser.__init__();\r\n            Browser._container = Browser.createElement(\"div\");\r\n            Browser._container.id = \"layaContainer\";\r\n            Browser._document.body.appendChild(Browser._container);\r\n        }\r\n        return Browser._container;\r\n    }\r\n    static set container(value) {\r\n        Browser._container = value;\r\n    }\r\n    static get window() {\r\n        return Browser._window || Browser.__init__();\r\n    }\r\n    static get document() {\r\n        Browser.__init__();\r\n        return Browser._document;\r\n    }\r\n}\r\nBrowser._pixelRatio = -1;\r\nBrowser.mainCanvas = null;\r\nBrowser.hanzi = new RegExp(\"^[\\u4E00-\\u9FA5]$\");\r\nBrowser.fontMap = [];\r\nBrowser.measureText = function (txt, font) {\r\n    var isChinese = Browser.hanzi.test(txt);\r\n    if (isChinese && Browser.fontMap[font]) {\r\n        return Browser.fontMap[font];\r\n    }\r\n    var ctx = Browser.context;\r\n    ctx.font = font;\r\n    var r = ctx.measureText(txt);\r\n    if (isChinese)\r\n        Browser.fontMap[font] = r;\r\n    return r;\r\n};\r\n",
  "references": [
    "D:/MySpace/Projects/NextPresent/PresentNext/libs/laya/resource/HTMLCanvas.ts",
    "D:/MySpace/Projects/NextPresent/PresentNext/libs/ILaya.ts",
    "D:/MySpace/Projects/NextPresent/PresentNext/libs/Laya.ts"
  ]
}
